<!DOCTYPE html>
<html>
  <head>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        height: 100vh;
        background-color: black;
      }
      header {
        height: 13%;
        background-color: coral;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      header h1 {
        color: white;
        font-size: 37px;
        text-shadow: 0 0 10px black;
      }
      main {
        height: 77%;
        background-color: white;
        display: flex;
        padding: 20px;
        gap: 20px;
        flex-direction: column;
      }
      footer {
        height: 10%;
        background-color: whitesmoke;
        box-shadow: 0 0 10px black;
        padding: 10px;
      }
      #form {
        height: 100%;
        display: flex;
        gap: 10px;
      }
      #form input {
        width: 100%;
        border: 1px solid #ccc;
        outline: none;
        border-radius: 50px;
        padding: 10px;
      }
      #form input:focus {
        box-shadow: 0 0 10px coral;
      }
      #form button {
        padding: 7px 20px;
        border: none;
        outline: none;
        border-radius: 50px;
        background-color: coral;
        color: white;
        font-weight: bold;
      }
      .sent {
        background-color: green;
        padding: 10px 30px;
        align-self: flex-end;
        color: white;
        border-top-left-radius: 20px;
        border-bottom-right-radius: 20px;
      }
      .received {
        background-color: rgb(38, 32, 32);
        padding: 10px 30px;
        align-self: flex-start;
        color: white;
        border-top-right-radius: 20px;
        border-bottom-left-radius: 20px;
      }
    </style>
  </head>

  <body>
    <header>
      <h1>Modern Way To Connect</h1>
    </header>

    <main></main>

    <footer>
      <form id="form" onsubmit="sendMessage(event)">
        <input type="text" placeholder="Type Message Here...." />
        <button>Send</button>
      </form>
    </footer>

    <script src="/socket.io/socket.io.js"></script>
    <script>
      const socket = io();
      var input = document.querySelector("input");
      var main = document.querySelector("main");

      function sendMessage(event) {
        event.preventDefault();
        if (input.value) {
          socket.emit("chat message", input.value);

          var div = document.createElement("div");
          div.textContent = input.value;
          div.classList.add("sent");
          main.appendChild(div);
        }
      }

      socket.on("chat message", (msg) => {
        var div = document.createElement("div");
        div.textContent = msg;
        div.classList.add("received");
        main.appendChild(div);
      });
    </script>
  </body>
</html>
